!function(){var L,B,N,k,C,g,o,M,A,n,i
!function(a){"use strict"
var e,t,o
a(document).on("click",".nav-menu a, .mobile-nav a, .scrollto",function(e){var t
if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&(e.preventDefault(),(t=a(this.hash)).length))return t=t.offset().top,a("#header").length&&(t-=a("#header").outerHeight()-2),"#header"==a(this).attr("href")&&(t=0),a("html, body").animate({scrollTop:t},1500,"easeInOutExpo"),a(this).parents(".nav-menu, .mobile-nav").length&&(a(".nav-menu .active, .mobile-nav .active").removeClass("active"),a(this).closest("li").addClass("active")),a("body").hasClass("mobile-nav-active")&&(a("body").removeClass("mobile-nav-active"),a(".mobile-nav-toggle i").toggleClass("icofont-navigation-menu icofont-close"),a(".mobile-nav-overly").fadeOut()),!1}),a(".nav-menu").length?(e=a(".nav-menu").clone().prop({class:"mobile-nav d-lg-none"}),a("body").append(e),a("body").prepend('<button type="button" class="mobile-nav-toggle d-lg-none"><i class="icofont-navigation-menu"></i></button>'),a("body").append('<div class="mobile-nav-overly"></div>'),a(document).on("click",".mobile-nav-toggle",function(e){a("body").toggleClass("mobile-nav-active"),a(".mobile-nav-toggle i").toggleClass("icofont-navigation-menu icofont-close"),a(".mobile-nav-overly").toggle()}),a(document).on("click",".mobile-nav .drop-down > a",function(e){e.preventDefault(),a(this).next().slideToggle(300),a(this).parent().toggleClass("active")}),a(document).click(function(e){var t=a(".mobile-nav, .mobile-nav-toggle")
t.is(e.target)||0!==t.has(e.target).length||a("body").hasClass("mobile-nav-active")&&(a("body").removeClass("mobile-nav-active"),a(".mobile-nav-toggle i").toggleClass("icofont-navigation-menu icofont-close"),a(".mobile-nav-overly").fadeOut())})):a(".mobile-nav, .mobile-nav-toggle").length&&a(".mobile-nav, .mobile-nav-toggle").hide(),t=a("section"),o=a(".nav-menu, #mobile-nav"),a(window).on("scroll",function(){var n=a(this).scrollTop()+80
t.each(function(){var e=a(this).offset().top,t=e+a(this).outerHeight()
e<=n&&n<=t&&(n<=t&&o.find("li").removeClass("active"),o.find('a[href="#'+a(this).attr("id")+'"]').parent("li").addClass("active"))})}),a(window).scroll(function(){100<a(this).scrollTop()?a("#header").addClass("header-scrolled"):a("#header").removeClass("header-scrolled")}),100<a(window).scrollTop()&&a("#header").addClass("header-scrolled"),a(window).scroll(function(){100<a(this).scrollTop()?a(".back-to-top").fadeIn("slow"):a(".back-to-top").fadeOut("slow")}),a(".back-to-top").click(function(){return a("html, body").animate({scrollTop:0},1500,"easeInOutExpo",function(){a(".nav-menu ul:first li:first").addClass("active")}),!1}),a(window).on("load",function(){var e=a(".portfolio-container").isotope({itemSelector:".portfolio-item",layoutMode:"fitRows"})
a("#portfolio-flters li").on("click",function(){a("#portfolio-flters li").removeClass("filter-active"),a(this).addClass("filter-active"),e.isotope({filter:a(this).data("filter")})}),a(document).ready(function(){a(".venobox").venobox()})}),a(".testimonials-carousel").owlCarousel({autoplay:!0,dots:!0,loop:!0,responsive:{0:{items:1},768:{items:2},900:{items:3}}}),a(".portfolio-details-carousel").owlCarousel({autoplay:!0,dots:!0,loop:!0,items:1}),AOS.init({duration:800})}(jQuery)
const y="0x0000000000000000000000000000000000000000",D=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],type:"function"},,{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],I=[{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"address",name:"bep20Token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"claimBEP20Token",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"address",name:"bep20Token",type:"address"}],name:"claimBEP20TokenAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"claimBNB",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"}],name:"claimBNBAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"instance",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"destroyInstance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"uint256",name:"newUnlockStartTime",type:"uint256"},{internalType:"uint256",name:"newUnlockEndTime",type:"uint256"}],name:"extendLockTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"uint256",name:"amountToIncrement",type:"uint256"},{internalType:"uint8",name:"feePaymentMode",type:"uint8"}],name:"increaseLockAmount",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"vestingToken",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"unlockStartTime",type:"uint256"},{internalType:"uint256",name:"unlockEndTime",type:"uint256"},{internalType:"address payable",name:"withdrawer",type:"address"},{internalType:"uint8",name:"feePaymentMode",type:"uint8"}],name:"lockTokens",outputs:[{internalType:"uint256",name:"lockId",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"address",name:"migratorContract",type:"address"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"_feesReceiver",type:"address"},{internalType:"address",name:"_mudraToken",type:"address"},{internalType:"address",name:"_master",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"instance",type:"address"},{indexed:!1,internalType:"address",name:"receiver",type:"address"}],name:"OnInstanceDestruction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"vestedToken",type:"address"},{indexed:!0,internalType:"address",name:"vestingAddress",type:"address"}],name:"OnInstanceInit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OnLockAmountIncreased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newUnlockStartTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newUnlockEndTime",type:"uint256"}],name:"OnLockDurationIncreased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!0,internalType:"address",name:"migrator",type:"address"}],name:"OnLockMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OnLockOwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OnLockWithdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!0,internalType:"address",name:"tokenAddress",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"unlockStartTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"unlockEndTime",type:"uint256"}],name:"OnTokenLock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"lockId",type:"uint256"}],name:"OnTokenUnlock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,
internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"fee",type:"uint256"}],name:"setEthFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"newFeeReceiver",type:"address"}],name:"setFeeReceiver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"fee",type:"uint256"}],name:"setIncreaseAmountEthFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"fee",type:"uint256"}],name:"setIncreaseAmountMudraFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_master",type:"address"}],name:"setMasterContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newMigrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"fee",type:"uint256"}],name:"setMudraFeeAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_mudraToken",type:"address"}],name:"setMudraToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"percent",type:"uint256"}],name:"setVestingTokenFeePercent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"address",name:"newOwner",type:"address"}],name:"transferLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawPartially",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"ethFeeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeReceiver",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"},{internalType:"address",name:"bep20Token",type:"address"}],name:"getBEP20TokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"}],name:"getBNBBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockId",type:"uint256"}],name:"getTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"increaseAmountEthFeeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"increaseAmountMudraFeeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"masterContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contract IMigrator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"mudraFeeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mudraToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenLocks",outputs:[{internalType:"address",name:"instance",type:"address"},{internalType:"address",name:"vestingToken",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"unlockStartTime",type:"uint256"},{internalType:"uint256",name:"unlockEndTime",type:"uint256"},{internalType:"uint256",name:"withdrawnAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"userLockAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"userLocksLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"vestingTokenFeePercent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"vestingToken",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"vestingTokenLockAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"vestingToken",type:"address"}],name:"vestingTokenLocksLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]
B=L=void 0
async function t(){return C||$("#lock-list").is(":visible")?(console.log("skipping wallet refresh as some action is in progress"),$("#newlock_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),$("#newlock_connect_wallet_msg").show(),$("#discover_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),$("#discover_connect_wallet_msg").show(),$("#research_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),void $("#research_connect_wallet_msg").show()):(v_info=await s(),0==v_info.status?(console.log("skipping wallet refresh as new account is not compatible"),$("#newlock_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),$("#newlock_connect_wallet_msg").show(),$("#discover_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),$("#discover_connect_wallet_msg").show(),$("#research_connect_wallet_msg").text("Your connected wallet information seems to have changed, please refresh page."),void $("#research_connect_wallet_msg").show()):(h(v_info),v(v_info),T(v_info),void r(v_info)))}function a(e){e.on("accountsChanged",async e=>{await t()}),e.on("chainChanged",async e=>{await t()}),e.on("disconnect",async(e,t)=>{$("#newlock_connect_wallet_msg").text("Wallet Disconnected. Please refresh page."),$("#newlock_connect_wallet_msg").show(),$("#discover_connect_wallet_msg").text("Wallet Disconnected. Please refresh page."),$("#discover_connect_wallet_msg").show(),$("#research_connect_wallet_msg").text("Wallet Disconnected. Please refresh page."),await $("#research_connect_wallet_msg").show()})}async function s(){var e={status:!0,msg:""},t={status:!0,msg:""},n=new Web3(L),a=await n.eth.getChainId()
return(a=evmChains.getChain(a)).name.toLowerCase()!=o?(console.log("Not on BSC Mainnet"),t.status=!1,t.msg="Current wallet not on BSC Mainnet"):(await n.eth.getAccounts()).length||(console.log("No account information present"),t.status=!1,t.msg="No account information in current wallet."),0==(e=await t).status||(e=await async function(){var e,t={status:!0,msg:""},n=new Web3(L),a=await n.eth.getAccounts()
if(!a.length)return console.log("No account information present"),t.status=!1,t.msg="No account information in current wallet.",t
for(e=0;e<a.length;){if(n.utils.isAddress(a[e].toLowerCase())){B=a[e]
break}e++}return e>=a.length&&(console.log("No account information present"),t.status=!1,t.msg="No account information in current wallet."),t}()).status,e}function r(e){}$(document).ready(async function(){var e={walletconnect:{package:d,options:{rpc:{56:"https://bsc-dataseed.binance.org/"},rpcUrl:"https://bsc-dataseed.binance.org/",network:"binance",chainId:56}}}
n=new c({cacheProvider:!1,providerOptions:e,disableInjectedProvider:!1}),console.log("Web3Modal instance is",n),await async function(){var t={status:!0,msg:""}
try{L=await n.connectTo("injected")}catch(e){return L=void 0,console.log("Could not get injected wallet connection",e),t.status=!1,t.msg="No wallet detected",t}return 0==(t=await s()).status?B=L=void 0:(a(L),h(t),v(),T(),r()),t}()}),N=void 0,k=[]
const c=window.Web3Modal.default,d=window.WalletConnectProvider.default
C=!1
const P=.1
g="https://bsc-dataseed.binance.org",o="binance smart chain mainnet",M="0xD55d70E9F7243A11e650E7d1569649B2E9BB6b68",A=new Web3(new Web3.providers.HttpProvider(g))
async function f(e){var t=new Web3(L),e=await(e=new t.eth.Contract(D,e)).methods.allowance(B,M).call()
return(t=t.utils.toBN(2).pow(t.utils.toBN(256)).sub(t.utils.toBN(1))).cmp(Web3.utils.toBN(e))<=0}async function u(){var e,t,n,a,o,i,l,s,r,c
for(console.log("get all locks"),e=[],t=new Web3(L),n=B,o=await(a=new t.eth.Contract(I,M)).methods.userLocksLength(n).call(),i=0;i<o;)l=await a.methods.userLockAt(n,i).call(),(s=await a.methods.tokenLocks(l).call()).lpToken=s.vestingToken.toLowerCase(),c=await m(s.lpToken),r=await a.methods.getTokenBalance(l).call(),c={id:l,lp_address:s.lpToken,amount:t.utils.toBN(r),status:!0,unlock_time:s.unlockStartTime,vesting_time:s.unlockEndTime,withdrawn_amount:t.utils.toBN(s.withdrawnAmount),lp_info:c},e.push(c),i++
return e}async function p(e,t){var n,a,o,i,l,s,r,c
if(console.log("get all locks"),n=[],i=await(o=new(a=new Web3(g)).eth.Contract(I,M)).methods.lockNonce().call(),!((i=parseInt(i))<e)){for(l=e;l<i&&l<e+t;)(s=await o.methods.tokenLocks(l).call()).lpToken=s.vestingToken.toLowerCase(),s.lpToken.toLowerCase()!=y.toLowerCase()&&(c=await m(s.lpToken),r=await o.methods.getTokenBalance(l).call(),c={id:l,lp_address:s.lpToken,amount:a.utils.toBN(r),status:!0,unlock_time:s.unlockStartTime,vesting_time:s.unlockEndTime,lp_info:c},n.push(c)),l++
return n}}async function m(e){var t,n=e,a=null==L?g:L,a={address:"",name:"",symbol:"",decimals:0,total_supply:new(e=new Web3(a)).utils.BN(0),valid:!0,err_msg:"",allowance:!1}
if(!e.utils.isAddress(n))return a.err_msg="Not a valid Token address",H("LP token address"+n),a.valid=!1,a
if((await e.eth.getCode(n)).toLowerCase()=="0x".toLowerCase())return a.err_msg="Not a valid Token address",H("LP token code"+n),a.valid=!1,a
try{if(t=new e.eth.Contract(D,n),a.name=await t.methods.name().call(),a.name.toLowerCase()=="Pancake LPs".toLowerCase())return a.err_msg="Not a valid Token address. For liquidity tokens, please use liquidity locker",H("LP token pancake"+n),a.valid=!1,a}catch(e){return a.err_msg="Not a valid Token address",H("LP token exception"+n),a.valid=!1,a}return a.total_supply=e.utils.toBN(await t.methods.totalSupply().call()),a.decimals=await t.methods.decimals().call(),a.symbol=await t.methods.symbol().call(),a.address=n,null!=B&&(a.allowance=await f(n)),a}async function _(e){var t=new Web3(L),e=await(a=new t.eth.Contract(D,e)).methods.balanceOf(B).call(),n=await a.methods.decimals().call(),a=Object.keys(t.utils.unitMap).find(e=>t.utils.unitMap[e]===t.utils.toBN(10).pow(t.utils.toBN(n)).toString()),a=t.utils.fromWei(e,a)
return parseFloat(a),a}async function w(){var e,t
if(N)for(l in e=await _(N),$("#newlock_lptoken_balance_info").text(e),$("#newlock_amount").val(e),t=await u())t[l].lp_address.toLowerCase()==N.toLowerCase()&&$("#newlock_result_info").html("You already have a lock for this LP. See in <a onclick=$('#lock_manage_tab_link').click() href='#tab-2'> My Locks.</a>")}function W(e){$("#newlock_lock_max_amount").prop("disabled",e),$("#newlock_amount").prop("disabled",e),$("#newlock_unlocktime_now").prop("disabled",e),$("#newlock_unlocktime_plus1").prop("disabled",e),$("#newlock_unlocktime").prop("disabled",e),$("#newlock_feeLP").prop("disabled",e),$("#newlock_feeBNB").prop("disabled",e),$("#newlock_lockbutton").prop("disabled",e),$("#newlock_lockbutton_approve").prop("disabled",e)}function S(){$("#newlock_amount").val(""),document.querySelector("#newlock_unlocktime")._flatpickr.setDate((new Date).setHours((new Date).getHours()+24),!0),$("#newlock_feeLP").prop("checked",!1),$("#newlock_feeBNB").prop("checked",!0),$("#newlock_lptoken_info").html("--"),$("#newlock_lptoken_balance_info").text("0"),$("#newlock_lockbutton_approve span").first().text("Approve Tokens")}async function b(e){var t
try{if($("#newlock_result_info").html(""),$("#newlock_lptoken_info_spinner").show(),S(),42==(e=$("#newlock_lpaddress").val().trim().toLowerCase()).length&&!A.utils.isAddress(e)&&(H("lower case not valid "+e),e=e.toUpperCase(),!A.utils.isAddress(e))){H("upper case not valid "+e)
try{e=A.utils.toChecksumAddress(e),H("checksum case is valid "+A.utils.isAddress(e))}catch(e){H("checksum case is not failed")}}H("New Lock input for: "+e),(t=await m(e)).valid?(N=e,$("#newlock_lptoken_info").html('<a target="_blank" href=https://bscscan.com/token/'+t.address+">"+t.name+" ("+t.symbol+" )</a></a>"),await w(),W(!1),t.allowance?($("#newlock_lockbutton_approve").prop("disabled",!0),$("#newlock_lockbutton_approve span").first().text("Approved")):$("#newlock_lockbutton").prop("disabled",!0)):($("#newlock_lptoken_info").html(t.err_msg),W(!0),H("New LP token fetch failed: "+t.err_msg))}catch(e){console.log(e),H("New LP token fetch failed: "+(null!=e.message?e.message:"Unknown error")),H("New LP token fetch failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#newlock_lptoken_info").text("Something went wrong. Please try again."),W(!0),N=void 0}finally{$("#newlock_lptoken_info_spinner").hide()}}async function h(e){var t
null!=B?($("#newlock_connect_wallet").hide(),$("#newlock_connected_wallet_address").text(B.substring(0,6)+".."+B.substring(B.length-4,B.length)),$("#newlock_connected_wallet").show(),$("#newlock_connect_wallet_msg").hide(),$("#newlock_lpaddress").prop("disabled",!1),$("#newlock_lptoken_info").html("--"),!N||(t=await getLPTokenInfo(N)).valid&&(await w(),t.allowance?($("#newlock_lockbutton_approve").prop("disabled",!0),$("#newlock_lockbutton_approve span").first().text("Approved"),$("#newlock_lockbutton").prop("disabled",!1)):($("#newlock_lockbutton").prop("disabled",!0),$("#newlock_lockbutton_approve").prop("disabled",!1),$("#newlock_lockbutton_approve span").first().text("Approve Tokens")))):($("#newlock_connect_wallet").show(),$("#newlock_connected_wallet_address").text(""),$("#newlock_connected_wallet").hide(),$("#newlock_lpaddress").prop("disabled",!0),$("#newlock_connect_wallet_msg").text(e.msg),$("#newlock_connect_wallet_msg").show(),W(!0))}async function v(){}async function T(){}async function r(){}async function x(e){var t,n,a,s,o,i,r,l,c,d,u,p,m,_,w
$("#lock_certificate_container").show(),$("#lock_certificate_spinner").show()
try{if(u=e,console.log("get lock by LP"),(_=await(m=new(p=new Web3(g)).eth.Contract(I,M)).methods.tokenLocks(u).call()).lpToken=_.vestingToken.toLowerCase(),w=await async function(e){var t,n=e,a=g,a={address:"",name:"",symbol:"",total_supply:new(e=new Web3(a)).utils.BN(0),valid:!0,err_msg:"",allowance:!1}
if(!e.utils.isAddress(n))return a.err_msg="Not a valid token address",H("Token address"+n),a.valid=!1,a
if((await e.eth.getCode(n)).toLowerCase()=="0x".toLowerCase())return a.err_msg="Not a valid token address",H("LP token code"+n),a.valid=!1,a
try{t=new e.eth.Contract(D,n)}catch(e){return a.err_msg="Not a valid address",H("Token exception"+n),a.valid=!1,a}return a.address=n,a.total_supply=e.utils.toBN(await t.methods.totalSupply().call()),a.symbol=await t.methods.symbol().call(),a.name=await t.methods.name().call(),a.decimals=await t.methods.decimals().call(),null!=B&&(a.allowance=await f(n)),a}(_.lpToken),u=await m.methods.getTokenBalance(u).call(),(t=await{lp_address:_.lpToken,amount:p.utils.toBN(u),status:!0,unlock_time:_.unlockStartTime,vesting_time:_.unlockEndTime,lp_info:w}).lp_address.toLowerCase()==y.toLowerCase())return void console.log("no address found")
new QRCode(document.getElementById("certificate_qrcode"),{text:window.location.origin+window.location.pathname+"?certificate="+e,width:128,height:128,correctLevel:QRCode.CorrectLevel.H}),$("#lock_certificate_lptoken").prop("href","https://bscscan.com/token/"+t.lp_address),$("#lock_certificate_token0").prop("href","https://bscscan.com/token/"+t.lp_info.address),$("#lock_certificate_token0 span").text(t.lp_info.name+" ("+t.lp_info.symbol+")"),n=new A.utils.BN(0),a=t.lp_info.total_supply,s=[],o=Object.keys(A.utils.unitMap).find(e=>A.utils.unitMap[e]===A.utils.toBN(10).pow(A.utils.toBN(t.lp_info.decimals)).toString()),new Date(1e3*t.unlock_time)>new Date&&(n=n.add(t.amount),s.push({time:new Date(1e3*t.unlock_time),vesting_time:new Date(1e3*t.vesting_time),amount:parseFloat(A.utils.fromWei(t.amount,o))})),i=A.utils.fromWei(n,o),r=A.utils.fromWei(a,o),0!=i?$("#lock_certificate_status").html("<i class='icofont-ui-lock' style='font-size: 30px;'></i> Token Locked"):$("#lock_certificate_status").html("<i class='icofont-ui-unlock' style='font-size: 30px;'></i> Token Unlocked"),$("#lock_certificate_lockpercent .progress-value").text((i/r*100).toFixed(2)+"%"),c=180<(l=parseInt(i/r*360))?"#049dff":90<l?"#fdba04":"#ff0c04",$(".progress.red .progress-bar").prop("style","border-color: "+c),180<l?($.keyframe.define({name:"loading-1",from:{transform:"rotate(0deg)"},to:{transform:"rotate(180deg)"}}),$.keyframe.define({name:"loading-2",from:{transform:"rotate(0deg)"},to:{transform:"rotate("+(l-180)+"deg)"}})):($.keyframe.define({name:"loading-1",from:{transform:"rotate(0deg)"},to:{transform:"rotate("+l+"deg)"}}),$.keyframe.define({name:"loading-2",from:{transform:"rotate(0deg)"},to:{transform:"rotate(0deg)"}})),$("#lock_certificate_lockamount").text(parseFloat(i).toFixed(4)),$("#lock_certificate_totalamount").text(parseFloat(r).toFixed(4)),$("#lock_certificate_unlocktime").html(""),d=$("#lock_certificate_unlocktime"),$.each(s,function(e){var t=s[e].time,n=t-new Date,a=s[e].vesting_time,o=a-new Date,i=(s[e].amount/r*100).toFixed(2),l=$("<li />").appendTo(d),n=s[e].amount.toFixed(4)+"("+i+"%) tokens unlock "+moment.duration(n).humanize(!0)
a.getTime()!=t.getTime()&&(n=n+", vesting completes "+moment.duration(o).humanize(!0)),$("<small><a/>").text(n).appendTo(l)})}finally{$("#lock_certificate_spinner").hide()}}function U(){$("#managelock_withdraw_input").hide(),$("#managelock_withdraw_max_button").hide(),$("#managelock_withdraw_available_display").hide(),$("#managelock_withdraw_warning_display").hide(),$("#managelock_withdraw_submit_button").hide(),$("#managelock_withdraw_spinner").hide(),$("#managelock_withdraw_result").hide(),$("#managelock_extend_input").hide(),$("#managelock_extend_current_button").hide(),$("#managelock_extend_plus1_button").hide(),$("#managelock_extend_submit_button").hide(),$("#managelock_extend_spinner").hide(),$("#managelock_extend_result").hide(),$("#managelock_increment_input").hide(),$("#managelock_increment_max_button").hide(),$("#managelock_increment_available_display").hide(),$("#managelock_increment_submit_button").hide(),$("#managelock_increment_spinner").hide(),$("#managelock_increment_result").hide(),$("#managelock_increment_feeLP").hide(),$("#managelock_increment_feeBNB").hide(),$("#managelock_increment_fee_container").hide(),$("#managelock_transfer_input").hide(),$("#managelock_transfer_submit_button").hide(),$("#managelock_transfer_spinner").hide(),$("#managelock_transfer_result").hide(),$("#managelock_withdrawreward_input").hide(),$("#managelock_withdrawreward_info_spinner").hide(),$("#managelock_withdrawreward_info").hide(),$("#managelock_withdrawreward_bnb_display").hide(),$("#managelock_withdrawreward_submit_button").hide(),$("#managelock_withdrawreward_spinner").hide(),$("#managelock_withdrawreward_result").hide(),$("#managelock_generatelink_display").hide(),$("#managelock_generatelink_spinner").hide(),$("#managelock_generatelink_result").hide()}function O(e){$("#managelock_optionwithdraw_button").prop("disabled",e),$("#managelock_optionextend_button").prop("disabled",e),$("#managelock_optionincrement_button").prop("disabled",e),$("#managelock_optiontransfer_button").prop("disabled",e),$("#managelock_optionwithdrawreward_button").prop("disabled",e),$("#managelock_optiongeneratelink_button").prop("disabled",e)}function E(){$("#managelock_optionwithdraw_button").on("click",async function(e){var t,n,a,o
U(),$("#managelock_withdraw_input").show(),$("#managelock_withdraw_input").focus(),$("#managelock_withdraw_max_button").show(),$("#managelock_withdraw_available_display").show(),$("#managelock_withdraw_warning_display").show(),$("#managelock_withdraw_submit_button").show(),$("#managelock_withdraw_max_button").unbind("click"),$("#managelock_withdraw_submit_button").unbind("click"),$("#managelock_withdraw_input").unbind("keyup"),t=$("#managelock_withdraw_submit_button").attr("data-index"),k[t].unlock_time>(new Date).getTime()/1e3?($("#managelock_withdraw_available_display span").text("0"),$("#managelock_withdraw_submit_button").prop("disabled",!0)):k[t].vesting_time<(new Date).getTime()/1e3?($("#managelock_withdraw_available_display span").text($("#lock_list_lockamount").text()),$("#managelock_withdraw_submit_button").prop("disabled",!1)):(o=parseInt((new Date).getTime()/1e3),o-=59,n=new Web3(L),a=k[t].withdrawn_amount.add(k[t].amount).mul(n.utils.toBN(o-k[t].unlock_time)).divn(k[t].vesting_time-k[t].unlock_time),o=Object.keys(n.utils.unitMap).find(e=>n.utils.unitMap[e]===n.utils.toBN(10).pow(n.utils.toBN(k[t].lp_info.decimals)).toString()),0<a.cmp(k[t].withdrawn_amount)?($("#managelock_withdraw_available_display span").text(n.utils.fromWei(a.sub(k[t].withdrawn_amount),o)),$("#managelock_withdraw_submit_button").prop("disabled",!1)):($("#managelock_withdraw_available_display span").text("0"),$("#managelock_withdraw_submit_button").prop("disabled",!0))),$("#managelock_withdraw_submit_button").on("click",async function(e){await async function(){var e,t,n,a,o,i,l,s,r,c,d,u
if($("#managelock_withdraw_result").html(""),$("#managelock_withdraw_result").show(),$("#managelock_withdraw_spinner").show(),e=!1,t=$("#managelock_withdraw_submit_button").attr("data-index"),$("#managelock_withdraw_available_display span").text()==$("#managelock_withdraw_input").val().trim().toString()&&k[t].vesting_time<(new Date).getTime()/1e3&&(e=!0),a=Object.keys(A.utils.unitMap).find(e=>A.utils.unitMap[e]===A.utils.toBN(10).pow(A.utils.toBN(k[t].lp_info.decimals)).toString()),0==(n=A.utils.toBN(A.utils.toWei($("#managelock_withdraw_input").val().trim(),a))))return $("#managelock_withdraw_result").html("Withdraw amount not set"),void $("#managelock_withdraw_spinner").hide()
O(C=!0),$("#managelock_withdraw_input").prop("disabled",!0),$("#managelock_withdraw_max_button").prop("disabled",!0),$("#managelock_withdraw_submit_button").prop("disabled",!0),a=k[t].id
try{i=a,l=n,s=e,console.log("unlock token"),r={output:{},status:!0,msg:""},u=new Web3(L),c=B,d=u.utils.toBN(0),u=new u.eth.Contract(I,M),s?await u.methods.withdraw(i).send({from:c,value:d}).on("transactionHash",function(e){console.log("Unlock : ",e)}).on("confirmation",function(e,t){console.log("Unlock confirmed")}).on("receipt",function(e){}).on("error",function(e,t){r.status=!1,r.err_msg=e}):await u.methods.withdrawPartially(i,l).send({from:c,value:d}).on("transactionHash",function(e){console.log("Unlock : ",e)}).on("confirmation",function(e,t){console.log("Unlock confirmed")}).on("receipt",function(e){}).on("error",function(e,t){r.status=!1,r.err_msg=e}),(o=await r).status?$("#managelock_withdraw_result").html("Withdraw successful. Please refresh page."):$("#managelock_withdraw_result").html("Withdraw failed: "+o.err_msg)}catch(e){console.log(e),H(a+" Withdraw Lock failed: "+(null!=e.message?e.message:"Unknown error")),H(a+" Withdraw Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#managelock_withdraw_result").html("Withdraw failed: "+(null!=e.message?e.message:"Unknown error"))}finally{$("#managelock_withdraw_input").prop("disabled",!1),$("#managelock_withdraw_max_button").prop("disabled",!1),$("#managelock_withdraw_submit_button").prop("disabled",!1),$("#managelock_withdraw_spinner").hide(),O(!1),C=!1}}()}),$("#managelock_withdraw_max_button").on("click",function(e){$("#managelock_withdraw_input").val($("#managelock_withdraw_available_display span").text())}),await $("#managelock_withdraw_input").keyup(function(){var e=$(this).val()
isNaN(e)&&2<(e=e.replace(/[^0-9\.]/g,"")).split(".").length&&(e=e.replace(/\.+$/,"")),$(this).val(e)})}),$("#managelock_optionextend_button").on("click",async function(e){var t,n
U(),$("#managelock_extend_input").show(),$("#managelock_extend_input").focus(),$("#managelock_extend_current_button").show(),$("#managelock_extend_plus1_button").show(),$("#managelock_extend_submit_button").show(),$("#managelock_extend_current_button").unbind("click"),$("#managelock_extend_plus1_button").unbind("click"),$("#managelock_extend_submit_button").unbind("click"),$("#managelock_extend_input").unbind("input"),t=$("#managelock_increment_submit_button").attr("data-index"),n=k[t].unlock_time,n=parseInt(n)+60,flatpickr("#managelock_extend_input",{enableTime:!0,dateFormat:"Y-m-d H:i",defaultDate:new Date(1e3*n),minDate:new Date(1e3*(n-59)),allowInput:!0}),$("#managelock_extend_submit_button").on("click",async function(e){await async function(){var e,t,n,a,o,i,l,s,r,c,d,u,p,m,_,w
if($("#managelock_extend_result").html(""),$("#managelock_extend_result").show(),t=e=new Date(document.querySelector("#managelock_extend_input")._flatpickr.latestSelectedDateObj),a=$("#managelock_extend_submit_button").attr("data-index"),n=new Date(1e3*k[a].unlock_time),i=new Date(1e3*k[a].vesting_time),s=t,r={valid:!!1,msg:""},(l=e)<n?(r.msg="Unlock time cannot be decreased.",r.valid=!1):s<i?(r.msg="Vesting time cannot be decreased.",r.valid=!1):s<l&&(r.msg="Vesting time cannot be less than or equal to lock time.",r.valid=!1),r.valid){O(C=!0),$("#managelock_extent_input").prop("disabled",!0),$("#managelock_extend_submit_button").prop("disabled",!0),$("#managelock_extend_current_button").prop("disabled",!0),$("#managelock_extend_plus1_button").prop("disabled",!0),$("#managelock_extend_spinner").show(),a=$("#managelock_extend_submit_button").attr("data-index"),a=k[a].id
try{c=a,d=e,u=t,console.log("increment unlock time"),p={output:{},status:!0,msg:""},m=new Web3(L),_=B,w=m.utils.toBN(0),await new m.eth.Contract(I,M).methods.extendLockTime(c,parseInt(d.getTime()/1e3),parseInt(u.getTime()/1e3)).send({from:_,value:w}).on("transactionHash",function(e){console.log("Extend : ",e)}).on("confirmation",function(e,t){console.log("Extend confirmed")}).on("receipt",function(e){}).on("error",function(e,t){p.status=!1,p.err_msg=e}),(o=await p).status?$("#managelock_extend_result").html("Extend successful. Please refresh page."):$("#managelock_extend_result").html("Extend failed: "+o.err_msg)}catch(e){console.log(e),H(a+" Extend Lock failed: "+(null!=e.message?e.message:"Unknown error")),H(a+" Extend Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#managelock_extend_result").html("Extend failed: "+(null!=e.message?e.message:"Unknown error"))}finally{$("#managelock_extent_input").prop("disabled",!1),$("#managelock_extend_submit_button").prop("disabled",!1),$("#managelock_extend_current_button").prop("disabled",!1),$("#managelock_extend_plus1_button").prop("disabled",!1),$("#managelock_extend_spinner").hide(),O(!1),C=!1}}else $("#managelock_extend_result").html(r.msg)}()}),$("#managelock_extend_input").on("input",function(){"Invalid Date"==new Date(document.querySelector("#managelock_extend_input")._flatpickr.latestSelectedDateObj)&&document.querySelector("#managelock_extend_input")._flatpickr.setDate(new Date(1e3*n),!0)}),$("#managelock_extend_current_button").on("click",function(e){document.querySelector("#managelock_extend_input")._flatpickr.setDate(new Date(1e3*n),!0)}),await $("#managelock_extend_plus1_button").on("click",function(e){var t=new Date(document.querySelector("#managelock_extend_input")._flatpickr.latestSelectedDateObj)
t.setMonth(t.getMonth()+12),document.querySelector("#managelock_extend_input")._flatpickr.setDate(t,!0)})}),$("#managelock_optionincrement_button").on("click",async function(e){var t
U(),$("#managelock_increment_input").show(),$("#managelock_increment_input").focus(),$("#managelock_increment_max_button").show(),$("#managelock_increment_available_display").show(),$("#managelock_increment_submit_button").show(),$("#managelock_increment_feeLP").show(),$("#managelock_increment_feeBNB").show(),$("#managelock_increment_fee_container").show(),$("#managelock_increment_max_button").unbind("click"),$("#managelock_increment_submit_button").unbind("click"),$("#managelock_increment_input").unbind("keyup"),$("#managelock_increment_submit_button").on("click",async function(e){await async function(){var t,e,n,a,o,i,l,s,r,c,d,u,p
if($("#managelock_increment_result").html(""),$("#managelock_increment_result").show(),t=$("#managelock_increment_submit_button").attr("data-index"),a=Object.keys(A.utils.unitMap).find(e=>A.utils.unitMap[e]===A.utils.toBN(10).pow(A.utils.toBN(k[t].lp_info.decimals)).toString()),0!=(e=A.utils.toBN(A.utils.toWei($("#managelock_increment_input").val().trim(),a)))){O(C=!0),$("#managelock_increment_input").prop("disabled",!0),$("#managelock_increment_submit_button").prop("disabled",!0),$("#managelock_increment_feeLP").prop("disabled",!0),$("#managelock_increment_feeBNB").prop("disabled",!0),$("#managelock_increment_spinner").show(),n=k[t].id,a=$("input[name=managelock_increment_fee]:checked").val()
try{i=n,l=e,s=a,console.log("increment lock amount"),r={output:{},status:!0,msg:""},c=new Web3(L),d=B,u=c.utils.toBN(0),p=0,"BNB"==s?u=c.utils.toBN(c.utils.toWei(P.toString(),"ether")):p=1,await new c.eth.Contract(I,M).methods.increaseLockAmount(i,l,p).send({from:d,value:u}).on("transactionHash",function(e){console.log("Lock : ",e)}).on("confirmation",function(e,t){console.log("Lock confirmed")}).on("receipt",function(e){}).on("error",function(e,t){r.status=!1,r.err_msg=e}),(o=await r).status?$("#managelock_increment_result").html("Increment successful. Please refresh page."):$("#managelock_increment_result").html("Increment failed: "+o.err_msg)}catch(e){console.log(e),H(n+" Increment Lock failed: "+(null!=e.message?e.message:"Unknown error")),H(n+" Increment Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#managelock_increment_result").html("Increment failed: "+(null!=e.message?e.message:"Unknown error"))}finally{$("#managelock_increment_input").prop("disabled",!1),$("#managelock_increment_submit_button").prop("disabled",!1),$("#managelock_increment_spinner").hide(),$("#managelock_increment_feeLP").prop("disabled",!1),$("#managelock_increment_feeBNB").prop("disabled",!1),O(!1),C=!1}}else $("#managelock_increment_result").html("Increment amount not set")}()}),t=$("#managelock_transfer_submit_button").attr("data-index"),t=await _(k[t].lp_address),$("#managelock_increment_available_display span").text(t),$("#managelock_increment_max_button").on("click",function(e){$("#managelock_increment_input").val($("#managelock_increment_available_display span").text())}),await $("#managelock_increment_input").keyup(function(){var e=$(this).val()
isNaN(e)&&2<(e=e.replace(/[^0-9\.]/g,"")).split(".").length&&(e=e.replace(/\.+$/,"")),$(this).val(e)})}),$("#managelock_optiontransfer_button").on("click",async function(e){U(),$("#managelock_transfer_input").show(),$("#managelock_transfer_input").focus(),$("#managelock_transfer_submit_button").show(),$("#managelock_transfer_submit_button").unbind("click"),await $("#managelock_transfer_submit_button").on("click",async function(e){await async function(){var e,t,n,a,o,i,l,s,r
if($("#managelock_transfer_result").html(""),$("#managelock_transfer_result").show(),e=(e=$("#managelock_transfer_input").val().trim()).toLowerCase(),A.utils.isAddress(e)){O(C=!0),$("#managelock_transfer_input").prop("disabled",!0),$("#managelock_transfer_submit_button").prop("disabled",!0),$("#managelock_transfer_spinner").show(),t=$("#managelock_transfer_submit_button").attr("data-index"),t=k[t].id
try{a=t,o=e,console.log("transfer owner"),i={output:{},status:!0,msg:""},l=new Web3(L),s=B,r=l.utils.toBN(0),await new l.eth.Contract(I,M).methods.transferLock(a,o).send({from:s,value:r}).on("transactionHash",function(e){console.log("transfer : ",e)}).on("confirmation",function(e,t){console.log("Transfer confirmed")}).on("receipt",function(e){}).on("error",function(e,t){i.status=!1,i.err_msg=e}),(n=await i).status?$("#managelock_transfer_result").html("Transfer successful. Please refresh page."):$("#managelock_transfer_result").html("Transfer failed: "+n.err_msg)}catch(e){console.log(e),H(t+" Transfer Lock failed: "+(null!=e.message?e.message:"Unknown error")),H(t+" Transfer Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#managelock_transfer_result").html("Transfer failed: "+(null!=e.message?e.message:"Unknown error"))}finally{$("#managelock_transfer_input").prop("disabled",!1),$("#managelock_transfer_submit_button").prop("disabled",!1),$("#managelock_transfer_spinner").hide(),O(!1),C=!1}}else $("#managelock_transfer_result").html("New owner is not a valid address")}()})}),$("#managelock_optionwithdrawreward_button").on("click",async function(e){await function(){U(),$("#managelock_withdrawreward_input").show(),$("#managelock_withdrawreward_bnb_display").show(),$("#managelock_withdrawreward_input").focus(),$("#managelock_withdrawreward_info").show(),$("#managelock_withdrawreward_submit_button").show(),$("#managelock_withdrawreward_input").unbind("keyup")
var t=$("#managelock_withdrawreward_submit_button").attr("data-index")
$("#managelock_withdrawreward_submit_button").on("click",async function(e){await async function(){var e,t,n,a,o,i,l,s,r,c,d,u,p,m
if($("#managelock_withdrawreward_result").html(""),$("#managelock_withdrawreward_result").show(),t=new Web3(new Web3.providers.HttpProvider(g)),"bnb"==(e=(e=$("#managelock_withdrawreward_input").val().trim()).toLowerCase())||t.utils.isAddress(e)){O(C=!0),$("#managelock_withdrawreward_input").prop("disabled",!0),$("#managelock_withdrawreward_submit_button").prop("disabled",!0),$("#managelock_withdrawreward_spinner").show(),t=$("#managelock_withdrawreward_submit_button").attr("data-index"),t=k[t].id
try{(n="bnb"==e?(c=t,console.log("withdraw reward token"),d={output:{},status:!0,msg:""},u=new Web3(L),p=B,m=u.utils.toBN(0),await new u.eth.Contract(I,M).methods.claimBNBAll(c).send({from:p,value:m}).on("transactionHash",function(e){console.log("transfer : ",e)}).on("confirmation",function(e,t){console.log("Transfer confirmed")}).on("receipt",function(e){}).on("error",function(e,t){d.status=!1,d.err_msg=e}),await d):(a=t,o=e,console.log("withdraw reward token"),i={output:{},status:!0,msg:""},l=new Web3(L),s=B,r=l.utils.toBN(0),await new l.eth.Contract(I,M).methods.claimBEP20TokenAll(a,o).send({from:s,value:r}).on("transactionHash",function(e){console.log("transfer : ",e)}).on("confirmation",function(e,t){console.log("Transfer confirmed")}).on("receipt",function(e){}).on("error",function(e,t){i.status=!1,i.err_msg=e}),await i)).status?$("#managelock_withdrawreward_result").html("Withdraw successful."):$("#managelock_withdrawreward_result").html("Withdraw failed: "+n.err_msg)}catch(e){console.log(e),H(t+" Withdraw failed: "+(null!=e.message?e.message:"Unknown error")),H(t+" Withdraw failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#managelock_withdrawreward_result").html("Withdraw failed: "+(null!=e.message?e.message:"Unknown error"))}finally{$("#managelock_withdrawreward_input").prop("disabled",!1),$("#managelock_withdrawreward_submit_button").prop("disabled",!1),$("#managelock_withdrawreward_spinner").hide(),O(!1),C=!1}}else $("#managelock_withdrawreward_result").html("Token is not a valid address")}()}),$("#managelock_withdrawreward_input").on("input",async function(e){await F(k[t].id)}),$("#managelock_withdrawreward_input").on("keypress",async function(e){13==e.which&&await F(k[t].id)})}()}),$("#managelock_optiongeneratelink_button").on("click",async function(e){U(),$("#managelock_generatelink_display").show(),$("#managelock_generatelink_display").focus(),$("#managelock_generatelink_display").prop("href",window.location.origin+window.location.pathname+"?certificate="+$("#managelock_generatelink_display").attr("data-address")),await $("#managelock_generatelink_display").html("<i class='icofont-share'></i>Shareable Link")})}function H(e){try{$.post("/api/log/",{address:e})}catch(e){console.log(e)}}$(document).ready(async function(){var e
flatpickr("#newlock_unlocktime",{enableTime:!0,dateFormat:"Y-m-d H:i",defaultDate:(new Date).setHours((new Date).getHours()+24),minDate:(new Date).setHours((new Date).getHours()+12),allowInput:!0}),$('a[data-toggle="tab"]').on("shown.bs.tab",async function(e){"#tab-2"==$(e.target).attr("href")&&await async function(){var e,t,n,a,o=$("#lock-list")
if(o.html(""),null!=B){$("#managelock_spinner").show(),k=[]
try{for(l in 0==(e=await u()).length&&o.text("No locks found for connected user!"),e)e[l],t=$("<li />").appendTo(o),n=$('<a data-toggle="collapse" class="" href="#list-lock'+l+'"/>').appendTo(t),a=parseInt(l)+1,n.text("Lock "+a),$('<i class="icofont-simple-down"/>').appendTo(n),$('<div data-index="'+l+'"id="list-lock'+l+'" class="collapse " data-parent=".lock-list" />').appendTo(o),l++
$(".lock-list .collapse").on("shown.bs.collapse",function(e){var t,n,a
$(".lock-list .collapse").each(function(e){$(this).html("")}),$("#"+$(e.target).attr("id")).html(i),t=k[$(e.target).attr("data-index")],a=Object.keys(A.utils.unitMap).find(e=>A.utils.unitMap[e]===A.utils.toBN(10).pow(A.utils.toBN(t.lp_info.decimals)).toString()),$("#lock_list_lockamount").text(A.utils.fromWei(t.amount,a)),a=(n=new Date(1e3*t.unlock_time))-new Date,new Date(1e3*t.vesting_time),new Date,$("#lock_list_unlocktime").text(moment.duration(a).humanize(!0)+" ("+n+")"),$("#managelock_generatelink_display").attr("data-address",$(e.target).attr("data-index")),$("#lock_list_lptoken").prop("href","https://bscscan.com/token/"+t.lp_address),$("#lock_list_token0").prop("href","https://bscscan.com/token/"+t.lp_info.address),$("#lock_list_token0 span").text(t.lp_info.symbol),e=$(e.target).attr("data-index"),$("#managelock_withdraw_submit_button").attr("data-index",e),$("#managelock_extend_submit_button").attr("data-index",e),$("#managelock_increment_submit_button").attr("data-index",e),$("#managelock_transfer_submit_button").attr("data-index",e),$("#managelock_withdrawreward_submit_button").attr("data-index",e),E()}),k=e}catch(e){o.text("Something went wrong!"),console.log(e),H(B+" Get Lock List failed: "+(null!=e.message?e.message:"Unknown error")),H(B+" Get Lock List failed stack: "+(null!=e.stack?e.stack:"Unknown stack"))}finally{$("#managelock_spinner").hide()}}else o.text("Please connect wallet to see locks.")}(),"#browse-locks"==$(e.target).attr("href")&&await async function(){var e,t,n,a,o,i=$("#browse-locks-list")
i.html(""),$("#browselock_spinner").show(),e=0
try{for(t=await p(e,1);null!=t;){for(l in t)n=t[l],a=$('<li style="top-margin:10px;background-color:#ffe6e6;"/>').appendTo(i),(o=$('<a target="_blank" href="" />').appendTo(a)).prop("href",window.location.origin+window.location.pathname+"?certificate="+n.id),$('<i class="icofont-certificate" style="font-size: 50px;"/>').appendTo(o),$("<span/>").appendTo(o).text(n.lp_info.name+" ("+n.lp_info.symbol+")"),l++
t=await p(e+=1,1)}}catch(e){i.text("Something went wrong. Please refresh page!"),console.log(e),H(B+" Browse Lock List failed: "+(null!=e.message?e.message:"Unknown error")),H(B+" Browse Lock List failed stack: "+(null!=e.stack?e.stack:"Unknown stack"))}finally{$("#browselock_spinner").hide()}}()}),$("#newlock_lpaddress").on("input",async function(e){await b()}),$("#newlock_lpaddress").on("keypress",async function(e){13==e.which&&await b()}),$("#newlock_lock_max_amount").on("click",function(e){$("#newlock_amount").val($("#newlock_lptoken_balance_info").text())}),$("#newlock_amount").keyup(function(){var e=$(this).val()
isNaN(e)&&2<(e=e.replace(/[^0-9\.]/g,"")).split(".").length&&(e=e.replace(/\.+$/,"")),$(this).val(e)}),$("#newlock_unlocktime").on("input",function(){"Invalid Date"==new Date(document.querySelector("#newlock_unlocktime")._flatpickr.latestSelectedDateObj)&&document.querySelector("#newlock_unlocktime")._flatpickr.setDate((new Date).setHours((new Date).getHours()+24),!0)}),$("#newlock_unlocktime_now").on("click",function(e){document.querySelector("#newlock_unlocktime")._flatpickr.setDate((new Date).setHours((new Date).getHours()+24),!0)}),$("#newlock_unlocktime_plus1").on("click",function(e){var t=new Date(document.querySelector("#newlock_unlocktime")._flatpickr.latestSelectedDateObj)
t.setMonth(t.getMonth()+12),document.querySelector("#newlock_unlocktime")._flatpickr.setDate(t,!0)}),$("#newlock_lockbutton").on("click",async function(e){await async function(e){var t,n,a,o,i,l,s,r,c,d,u,p,m,_,w,k,g,y,f,b,h,v,T,x
W(C=!0),$("#newlock_lpaddress").prop("disabled",!0),$("#newlock_lockbutton_spinner").show(),$("#newlock_result_info").html("")
try{if(e=$("#newlock_lpaddress").val().trim().toLowerCase(),t=new A.eth.Contract(D,e),n=await t.methods.decimals().call(),a=Object.keys(A.utils.unitMap).find(e=>A.utils.unitMap[e]===A.utils.toBN(10).pow(A.utils.toBN(n)).toString()),o=A.utils.toBN(A.utils.toWei($("#newlock_amount").val().trim(),a)),l=i=new Date(document.querySelector("#newlock_unlocktime")._flatpickr.latestSelectedDateObj),s=$("input[name=newlock_fee]:checked").val(),42==e.length&&!A.utils.isAddress(e)&&(H("lower case not valid "+e),e=e.toUpperCase(),!A.utils.isAddress(e))){H("upper case not valid "+e)
try{e=A.utils.toChecksumAddress(e),H("checksum case is valid "+A.utils.isAddress(e))}catch(e){H("checksum case is not failed")}}if(H("New Lock submit for amount: "+o+" time: "+i+"fee: "+s+"adress: "+e),b=o,h=i,v=l,T=s,x={valid:!!1,msg:""},null==e?(x.msg="LP Token address not set.",x.valid=!1):0==b?(x.msg="LP Token amount not set.",x.valid=!1):h<(b=(b=new Date).setHours(b.getHours()+12))?(x.msg="Unlock time too soon.",x.valid=!1):v<(b=(b=new Date).setHours(b.getHours()+12))?(x.msg="Vesting time too soon.",x.valid=!1):v<h?(x.msg="Vesting time cannot be less than or equal to lock time.",x.valid=!1):"BNB"!=T&&"LP"!=T&&(x.msg="Fee not set.",x.valid=!1),(r=x).valid)if(d=e,u=o,p=i,m=l,_=s,console.log("lock token"),w={output:{},status:!0,msg:""},k=new Web3(L),g=B,y=k.utils.toBN("0"),f=0,"BNB"==_?y=k.utils.toBN(k.utils.toWei(P.toString(),"ether")):f=1,await new k.eth.Contract(I,M).methods.lockTokens(d,u,parseInt(p.getTime()/1e3),parseInt(m.getTime()/1e3),g,f).send({from:g,value:y}).on("transactionHash",function(e){console.log("Lock : ",e)}).on("confirmation",function(e,t){console.log("Lock confirmed")}).on("receipt",function(e){}).on("error",function(e,t){w.status=!1,w.err_msg=e}),(c=await w).status){$("#newlock_result_info").html("Lock successfully created. <a onclick=$('#lock_manage_tab_link').click() href='#tab-2'>View in My Locks.</a>")
try{$("#newlock_lpaddress").val(""),N=void 0,S()}catch(e){H("Minor New Lock failed: "+(null!=e.message?e.message:"Unknown error")),H("Minor New Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack"))}}else console.log(c.err_msg),$("#newlock_result_info").html(c.err_msg),H("New Lock failed: "+c.err_msg),W(!1),$("#newlock_lockbutton_approve").prop("disabled",!0)
else $("#newlock_result_info").html(r.msg),W(!1),$("#newlock_lockbutton_approve").prop("disabled",!0)}catch(e){console.log(e),H("New Lock failed: "+(null!=e.message?e.message:"Unknown error")),H("New Lock failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#newlock_result_info").html("Lock could not be created: "+(null!=e.message?e.message:"Unknown error")),W(!1),$("#newlock_lockbutton_approve").prop("disabled",!0)}finally{$("#newlock_lpaddress").prop("disabled",!1),$("#newlock_lockbutton_spinner").hide(),C=!1}}()}),$("#newlock_lockbutton_approve").on("click",async function(e){await async function(){var e,t,n,a,o,i
W(C=!0),$("#newlock_lpaddress").prop("disabled",!0),$("#newlock_lockbutton_approve_spinner").show(),$("#newlock_result_info").html("")
try{t=N,n={output:{},status:!0,msg:""},o=new(a=new Web3(L)).eth.Contract(D,t),i=a.utils.toBN(2).pow(a.utils.toBN(256)).sub(a.utils.toBN(1)),await a.eth.sendTransaction({from:a.utils.toChecksumAddress(B),to:a.utils.toChecksumAddress(t),data:o.methods.approve(a.utils.toChecksumAddress(M),i).encodeABI()}).on("transactionHash",function(e){console.log("Approve : ",e)}).on("confirmation",function(e,t){console.log("Approve confirmed")}).on("receipt",function(e){}).on("error",function(e,t){n.status=!1,n.err_msg=e}),(e=await n).status?($("#newlock_result_info").html("Approved"),$("#newlock_lockbutton_approve").prop("disabled",!0),$("#newlock_lockbutton_approve span").first().text("Approved"),$("#newlock_lockbutton").prop("disabled",!1)):($("#newlock_result_info").html("Approval failed: "+e.err_msg),$("#newlock_lockbutton").prop("disabled",!0))}catch(e){console.log(e),H(N+" Approval failed: "+(null!=e.message?e.message:"Unknown error")),H(N+" Approval failed stack: "+(null!=e.stack?e.stack:"Unknown stack")),$("#newlock_result_info").html("Approval failed: "+(null!=e.message?e.message:"Unknown error")),$("#newlock_lockbutton").prop("disabled",!0)}finally{$("#newlock_lockbutton_approve_spinner").hide(),$("#newlock_lpaddress").prop("disabled",!1),i=$("#newlock_lockbutton").prop("disabled"),e=$("#newlock_lockbutton_approve").prop("disabled"),W(!1),$("#newlock_lockbutton").prop("disabled",i),$("#newlock_lockbutton_approve").prop("disabled",e),C=!1}}()}),$("#newlock_connect_wallet").on("click",async function(e){await(0==(await async function(){var t={status:!0,msg:""}
try{L=await n.connect()}catch(e){return L=void 0,console.log("Could not get injected wallet connection",e),t.status=!1,t.msg="No wallet detected",t}return 0==(t=await s()).status?B=L=void 0:(a(L),h(t),v(),T(),r()),t}()).status&&($("#newlock_connect_wallet_msg").text("Could not connect. Please check your wallet network."),$("#newlock_connect_wallet_msg").show(),$("#newlock_connected_wallet").hide(),$("#newlock_connect_wallet").show()))}),new URLSearchParams(window.location.search).has("certificate")&&(e=new URLSearchParams(window.location.search),$('a[href="#certificate"]').show(),$('a[href="#certificate"]').tab("show"),document.querySelector("#features").scrollIntoView({behavior:"smooth"}),await x(e.get("certificate")))})
async function F(e){var t,n,a,o,i,l,s,r,c
try{if("bnb"==(t=$("#managelock_withdrawreward_input").val().trim().toLowerCase()).toLowerCase())return r=e,console.log("get bnb balance"),r=await new(c=new Web3(g)).eth.Contract(I,M).methods.getBNBBalance(r).call(),n=await c.utils.fromWei(r,"ether"),void $("#managelock_withdrawreward_info").text("BNB, balance: "+n)
$("#managelock_withdrawreward_info").text(""),$("#managelock_withdrawreward_info_spinner").show(),(a=await m(t)).valid?($("#managelock_withdrawreward_info_spinner").hide(),o=e,i=t,console.log("get bep20 reward balance balance"),o=await new(l=new Web3(g)).eth.Contract(I,M).methods.getBEP20TokenBalance(o,i).call(),i=new l.eth.Contract(D,i),s=await i.methods.decimals().call(),i=Object.keys(l.utils.unitMap).find(e=>l.utils.unitMap[e]===l.utils.toBN(10).pow(l.utils.toBN(s)).toString()),n=await l.utils.fromWei(o,i),$("#managelock_withdrawreward_info").text(a.name+", balance: "+n)):($("#managelock_withdrawreward_info_spinner").hide(),$("#managelock_withdrawreward_info").html(a.err_msg))}catch(e){console.log(e),$("#managelock_withdrawreward_info_spinner").hide(),$("#managelock_withdrawreward_info").text("Something went wrong. Please try again.")}}i=`                 
<div class="form-group row text-left">
<div class="col-lg-12 offset-lg-2">

    <a target="_blank" href="" id="lock_list_lptoken" style="display:inline"><span>Token </span></a>:
    <a target="_blank" href="" id="lock_list_token0" style="display:inline"><span >--</span></a>
</div>
<div class="col-lg-12 offset-lg-2">
    <b>Locked Amount:&nbsp;</b><span id="lock_list_lockamount">---</span>
</div>
<div class="col-lg-12 offset-lg-2">
  <b>Unlock Time:&nbsp;</b><span id="lock_list_unlocktime"  style="list-style: none" >--</span>
</div>
</div>
<div class="form-group row ">
<div class="col-lg-10 offset-lg-2">
  <button id="managelock_optionwithdraw_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Withdraw Amount</button>
  <button id="managelock_optionextend_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Extend Lock Time</button>
  <button id="managelock_optionincrement_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Increase Amount</button>
  <button id="managelock_optiontransfer_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Transfer Ownership</button>
  <button id="managelock_optionwithdrawreward_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Withdraw Rewards</button>
  <button id="managelock_optiongeneratelink_button" type="button" class="btn btn-primary" style="margin-top: 5px;">Generate Public Link</button>
</div>
</div>
<br>
<br>
<!-- Withdraw amount-->
<div class="form-group row ">
<div class="col-lg-8 offset-lg-2">
  <div class="input-group">
    <input style="display:none" type="text" class="form-control" id="managelock_withdraw_input" value="0" placeholder="Enter LP token amount to withdraw">
    <div class="input-group-append">
      <button style="display:none;" class="btn btn-outline-secondary" type="button" id="managelock_withdraw_max_button">Max</button>
    </div>
  </div>
</div>
<div class="col-lg-8 offset-lg-2 text-left" style="bottom: -10px;">
  <h6 style="display:none"  id="managelock_withdraw_available_display" >Available to withdraw: 
    <span>
      0
    </span>
  </h6>
</div>
<div class="col-lg-8 offset-lg-2" style="display:none;font-size:small"  id="managelock_withdraw_warning_display">Please ensure you have withdrawn reward tokens (click on Withdraw Rewards above), if applicable for your locked tokens.</div>
<div class="col-lg-8 offset-lg-4">
  <button style="display:none;margin-top: 5px;" id= "managelock_withdraw_submit_button" type="button" class="btn btn-primary" style="margin-top: 5px;">
    Withdraw
  </button>
</div>


<!-- Extend time-->
<div class="col-lg-8 offset-lg-2">
  <div class="input-group">
    <input style="display:none" type="text" class="form-control" id="managelock_extend_input" placeholder="Enter new LP token unlock time">
    <div class="input-group-append">
      <button style="display:none" class="btn btn-outline-secondary" type="button" id="managelock_extend_current_button" >Current</button>
      <button style="display:none" class="btn btn-outline-secondary" type="button" id="managelock_extend_plus1_button" >+1 Year</button>
    </div>
  </div>
</div>
<div class="col-lg-8 offset-lg-4">
  <button style="display:none;margin-top: 5px;" id= "managelock_extend_submit_button" type="button" class="btn btn-primary" style="margin-top: 5px;">
    Extend
  </button>
</div>



<!-- Increase ampunt-->
<div class="col-lg-8 offset-lg-2">
  <div class="input-group">
    <input style="display:none" type="text" class="form-control" id="managelock_increment_input" placeholder="Enter LP token amount to add" >
    <div class="input-group-append">
      <button style="display:none" class="btn btn-outline-secondary" type="button" id="managelock_increment_max_button">Max</button>
    </div>
  </div>
</div>
<div class="col-lg-8 offset-lg-2 text-left" style="bottom: -10px;">
  <h6 style="display:none" id="managelock_increment_available_display">Available: 
    <span>
      0
    </span>
  </h6>
</div>
<div class="col-lg-8 offset-lg-2  text-left" style="display: none" id="managelock_increment_fee_container">
    <h6 style="margin-top: 10px;">Select fee type:</h6>
    <input type="radio" id="managelock_increment_feeLP" style="display:none" name="managelock_increment_fee" value="LP" >
    <label for="managelock_increment_feeLP"> Pay in LP <small>(.5 % of locked LP token)</small></label><br>
    <input type="radio" id="managelock_increment_feeBNB" style="display:none" name="managelock_increment_fee" value="BNB" checked>
    <label for="managelock_increment_feeBNB"> Pay in BNB <small> (.1 BNB flat)</small></label>
</div>
<div class="col-lg-8 offset-lg-4">
  <button style="display:none;margin-top: 5px;" id= "managelock_increment_submit_button" type="button" class="btn btn-primary" style="margin-top: 5px;">
    Increase
  </button>
</div>



<!-- Transfer lock-->
<div class="col-lg-8 offset-lg-2">
  <div class="input-group">
    <input style="display:none" type="text" class="form-control" id="managelock_transfer_input" placeholder="Enter new owner address">
   </div>
</div>

<div class="col-lg-8 offset-lg-4">
  <button style="display:none;margin-top: 5px;" id= "managelock_transfer_submit_button" type="button" class="btn btn-primary" style="margin-top: 5px;">
    Transfer
  </button>
</div>

<!-- Withdraw Rewards-->
<div class="col-lg-8 offset-lg-2">
  <div class="input-group">
    <input style="display:none" type="text" class="form-control" id="managelock_withdrawreward_input" placeholder="Enter reward token address">
    <img id="managelock_withdrawreward_info_spinner" src="/static/assets/img/inputloader.gif" class="right-input-loading" style="display:none"/> 
    <div class="first-right-box" id="managelock_withdrawreward_info" style="display:block">              
    </div>
</div>
</div>
<div class="col-lg-8 offset-lg-2" style="display:none;font-size:small"  id="managelock_withdrawreward_bnb_display">To withdraw BNB rewards, please type BNB in the text box above. For others, please enter reward token address. </div>
<div class="col-lg-8 offset-lg-4">
  <button style="display:none;margin-top: 5px;" id= "managelock_withdrawreward_submit_button" type="button" class="btn btn-primary" style="margin-top: 5px;">
  Withdraw
  </button>
</div>

<!-- Generate Link -->
<div class="col-lg-8 offset-lg-4">
 
  <div class="input-group">
    <a style="display:none" target="_blank" href="" id="managelock_generatelink_display">---
    </a>
  </div>
  </center>
</div>
</div>
<!--All result panels-->
<center>
<span id ="managelock_withdraw_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_withdraw_result"></span>
<span id ="managelock_extend_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_extend_result"></span>
<span id ="managelock_increment_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_increment_result"></span>
<span id ="managelock_transfer_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_transfer_result"></span>
<span id ="managelock_withdrawreward_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_withdrawreward_result"></span>
<span id ="managelock_generatelink_spinner" style="display:none"
              class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
<span id ="managelock_generatelink_result"></span>
</center>
`}.call(this)
;